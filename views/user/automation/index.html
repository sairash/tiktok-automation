{{define "content"}}
<section class="text-white">
    <div class="mx-auto max-w-screen-xl px-4 py-4 lg:flex lg:h-screen">
        <div class="h-full flex w-full">
            {{include "user/sidebar"}}
            <div class="flex flex-col w-full">
                <div class="overflow-x-auto sm:mx-0.5 lg:mx-0.5">
                    <div class="py-2 inline-block min-w-full sm:px-6 lg:px-8">
                        <div class="overflow-hidden">
                            <div class="flex justify-end mb-5">
                                <a class="rounded-md bg-white hover:bg-blue-600 px-5 py-2.5 text-sm font-medium text-black hover:text-white shadow" href="/home/automation/create">
                                    Create Automations
                                </a>
                            </div>
                            {{range $key, $value := .automations}}
                            <div class="my-2">
                                Automation hash: <span class="text-red-500">{{$key}}</span> running.
                            </div>
                            <table class="min-w-full text-center">
                                <thead class="bg-gray-800 border-b border-black">
                                    <tr>
                                        <th scope="col" class="text-sm font-medium px-6 py-4">
                                            Type
                                        </th>
                                        <th scope="col" class="text-sm font-medium px-6 py-4">
                                            Value
                                        </th>
                                        <th scope="col" class="text-sm font-medium px-6 py-4">
                                            Status
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="mt-5">
                                    {{range $new_key, $new_value := $value}}
                                        <tr
                                            class="bg-gray-700 border-b border-black transition duration-300 ease-in-out hover:bg-gray-600">
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">{{$new_value.TypeOfAutomation}}</td>
                                            <td class="text-sm font-light px-6 py-4 whitespace-nowrap">
                                                {{$new_value.Amount}}
                                            </td>
                                            <td class="text-sm font-light px-6 py-4 whitespace-nowrap flex justify-center">
                                                {{if $new_value.Executing}}
                                                <div class="h-2 w-16 rounded-full bg-gray-200">
                                                    <div
                                                        class="flex h-full items-center justify-center rounded-md progress-2">
                                                    </div>
                                                </div>
                                                {{else}}
                                                    Pending
                                                {{end}}
                                            </td>
                                        </tr>
                                    {{end}}
                                </tbody>
                            </table>
                            <div class="bg-gray-800 border-b border-black flex justify-end">
                                <a class="rounded-md bg-blue-600 px-5 py-2.5 my-2 mx-2 text-sm font-medium text-white shadow"
                                href="/home/automation/stop/{{$key}}">
                                    Stop Automation
                                </a>
                            </div>
                            {{end}}
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>

<style>
    .progress-2 {
        background: linear-gradient( rgb(29 78 216) 0 0) 0/0% no-repeat darkgray;
        animation: p2 2s infinite steps(10);
    }

    @keyframes p2 {
        100% {
            background-size: 110%;
        }
    }
</style>

{{end}}